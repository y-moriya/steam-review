# Steam Reviews CLI - 推奨ファイル構造

## ディレクトリ構造

```
steam-reviews-cli/
├── internal/
│   ├── api/
│   │   └── steam.go             # Steam API関連の処理
│   ├── logger/
│   │   └── logger.go            # ログ機能（標準出力とファイル出力の両方）
│   ├── models/
│   │   └── review.go            # データ構造体定義
│   ├── storage/
│   │   └── file.go              # ファイル保存処理
│   └── stats/
│       └── stats.go             # 統計処理
├── pkg/
│   ├── config/
│   │   └── config.go            # 設定関連（外部から利用可能）
│   └── i18n/
│       ├── i18n.go              # 国際化メイン実装
│       ├── messages.go          # メッセージキー定数定義
│       ├── detector.go          # 言語検出ロジック
│       ├── en.go                # 英語メッセージ
│       ├── ja.go                # 日本語メッセージ
│       └── i18n_test.go         # 国際化機能のテスト
├── bin/                         # ビルドしたバイナリの出力先
├── logs/                        # ログファイルの出力先
├── output/                      # デフォルトのファイル出力先
├── test_output/                 # テスト用のファイル出力先
├── go.mod
├── go.sum
├── main.go                      # エントリーポイント、CLI引数処理
└── README.md
```

## 各ファイルの役割

### `cmd/steam-review/main.go`
- アプリケーションのエントリーポイント
- コマンドライン引数の解析
- 各パッケージの協調処理
- エラーハンドリングとログ出力

### `internal/models/review.go`
- データ構造体の定義
- JSON変換ロジック
- データ変換メソッド

### `internal/api/steam.go`
- Steam API との通信
- レビューデータの取得
- API レスポンスの処理
- レート制限対応

### `internal/logger/logger.go`
- ログ機能の提供
- 標準出力とログファイルへの同時出力
- verboseモードでの詳細ログ制御
- エラーレベル別のログ出力

### `internal/storage/file.go`
- ファイル保存処理
- JSON/テキスト形式での出力
- 言語別ファイル分割
- ディレクトリ作成

### `internal/stats/stats.go`
- レビュー統計の計算
- 統計情報の表示
- 言語別分析

### `pkg/config/config.go`
- 設定構造体
- デフォルト値定義
- バリデーション

### `pkg/i18n/`
- **i18n.go**: 国際化機能のメイン実装、グローバル関数
- **messages.go**: メッセージキー定数の定義
- **detector.go**: 環境変数からの言語検出ロジック
- **en.go**: 英語メッセージの定義
- **ja.go**: 日本語メッセージの定義
- **i18n_test.go**: 国際化機能の単体テスト

## ファイル分割の利点

### 1. **保守性の向上**
- 機能ごとに分離されているため、修正箇所が特定しやすい
- 単一責任の原則に従い、各ファイルが明確な役割を持つ

### 2. **テスタビリティ**
- 各パッケージを独立してテストできる
- モックやスタブを使った単体テストが書きやすい

### 3. **再利用性**
- `pkg/` 以下は他のプロジェクトからも利用可能
- `internal/` は内部実装として隠蔽

### 4. **並行開発**
- 複数の開発者が異なるファイルを同時に編集可能
- Git でのマージコンフリクトが起きにくい

## パッケージ設計の指針

### `internal/` vs `pkg/`
- `internal/`: アプリケーション固有のロジック、外部からアクセス不可
- `pkg/`: 他のプロジェクトでも再利用可能なライブラリコード

### 依存関係の方向
```
cmd/ → internal/ → pkg/
```
- `cmd` は `internal` と `pkg` を利用
- `internal` は `pkg` を利用
- 循環依存は避ける

### インターフェース設計
各パッケージ間はインターフェースで結合し、具体的な実装に依存しない設計にする
